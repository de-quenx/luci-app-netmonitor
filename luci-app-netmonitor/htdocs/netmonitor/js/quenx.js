let buttonsVisible=localStorage.getItem('buttonsVisible')!=='false';let currentTheme=localStorage.getItem('theme')||'light';let activeChart='summary';const themes={light:'Light',dark:'Dark',ocean:'Ocean',cosmos:'Cosmos',gold:'Gold',silver:'Silver',violet:'Violet',mint:'Mint',noir:'Noir',charcoal:'Charcoal',midnight:'Midnight',glass:'Glass'};document.addEventListener('DOMContentLoaded',function(){document.body.setAttribute('data-theme',currentTheme);document.getElementById('themeText').textContent=themes[currentTheme];const ctrlButtons=document.getElementById('ctrlButtons');if(!buttonsVisible)ctrlButtons.classList.add('hidden');document.getElementById('ctrlToggle').addEventListener('click',()=>{buttonsVisible=!buttonsVisible;ctrlButtons.classList.toggle('hidden',!buttonsVisible);localStorage.setItem('buttonsVisible',buttonsVisible);});document.getElementById('themeBtn').addEventListener('click',()=>{const themeKeys=Object.keys(themes);const currentIndex=themeKeys.indexOf(currentTheme);const nextIndex=(currentIndex+1)%themeKeys.length;currentTheme=themeKeys[nextIndex];document.body.setAttribute('data-theme',currentTheme);document.getElementById('themeText').textContent=themes[currentTheme];localStorage.setItem('theme',currentTheme);showToast(`${themes[currentTheme]} Theme`,'success');});document.getElementById('refreshBtn').addEventListener('click',()=>location.reload());document.getElementById('statsBtn').addEventListener('click',toggleModal);document.getElementById('closeBtn').addEventListener('click',closeModal);document.getElementById('blurOverlay').addEventListener('click',closeAllModals);document.querySelectorAll('.chart-btn').forEach(btn=>{btn.addEventListener('click',(e)=>{const chart=e.target.getAttribute('data-chart');if(chart)switchChart(chart);});});setInterval(updateTime,1000);updateTime();});function toggleModal(){const modal=document.getElementById('statsModal');const overlay=document.getElementById('blurOverlay');const statsBtn=document.getElementById('statsBtn');const isVisible=modal.classList.contains('show');if(isVisible){closeModal();}else{modal.classList.add('show');overlay.classList.add('active');statsBtn.classList.add('active');}}function closeModal(){document.getElementById('statsModal').classList.remove('show');document.getElementById('blurOverlay').classList.remove('active');document.getElementById('statsBtn').classList.remove('active');}function closeAllModals(){closeModal();}function updateTime(){const now=new Date();document.getElementById('currentTime').textContent=now.toLocaleTimeString('en-US',{hour12:false,timeZone:'Asia/Jakarta'});}function switchChart(chartType){document.querySelectorAll('.chart-btn').forEach(btn=>{btn.classList.toggle('active',btn.getAttribute('data-chart')===chartType);});document.querySelectorAll('.chart-img').forEach(img=>{img.style.display='none';});const targetImg=document.getElementById(chartType);if(targetImg){activeChart=chartType;targetImg.style.display='block';}}function showToast(message,type,duration=1500){const toast=document.getElementById('toast');const toastMsg=document.getElementById('toastMsg');if(toast.timeoutId)clearTimeout(toast.timeoutId);toastMsg.textContent=message;toast.className=`toast show ${type}`;toast.timeoutId=setTimeout(()=>toast.classList.remove('show'),duration);}document.addEventListener('keydown',function(e){if(e.key==='Escape')closeAllModals();if((e.key==='t'||e.key==='T')&&!e.ctrlKey&&!e.altKey){document.getElementById('themeBtn').click();}if((e.key==='s'||e.key==='S')&&!e.ctrlKey&&!e.altKey){toggleModal();}if((e.key==='f'||e.key==='F')&&!e.ctrlKey&&!e.altKey){document.getElementById('refreshBtn').click();}});